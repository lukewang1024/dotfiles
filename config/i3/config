# i3 config file (v4)
# syntax:ssHash

set $exe exec --no-startup-id

# >> Workspace definitions

set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"
set $ws-androidstudio ""
set $ws-chromium ""
set $ws-feedreader ""
set $ws-firefox ""
set $ws-mailspring ""
set $ws-skype ""
set $ws-slack ""
set $ws-spotify ""
set $ws-sublime_text ""
set $ws-termite ""
set $ws-vscode ""

# >> audio and music definitions

# PulseAudio / pamixer
set $inc pamixer --allow-boost -i 5
set $biginc pamixer --allow-boost -i 15
set $dec pamixer --allow-boost -d 5
set $bigdec pamixer --allow-boost -d 15
set $mute pamixer --allow-boost -t
set $truemute pamixer -m

# mpris
set $toggle playerctl play-pause
set $pause playerctl pause
set $next playerctl next
set $prev playerctl previous
set $lilfor playerctl position 10+
set $bigfor playerctl position 120+
set $lilbak playerctl position 10-
set $bigbak playerctl position 120-
set $beg playerctl position 0

# spotify
#set $music spotify
#set $toggle dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause
#set $pause dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Pause
#set $play dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Play
#set $next dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next
#set $prev dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous
#set $lilfor dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Seek
#set $bigfor dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Seek(

# mpd
#set $music st -e ncmpcpp
#set $toggle mpc toggle
#set $pause mpc pause
#set $next mpc next
#set $prev mpc prev
#set $lilfor mpc seek +10
#set $bigfor mpc seek +120
#set $lilbak mpc seek -10
#set $bigbak mpc seek -120
#set $beg mpc seek 0%

# cmus
#set $music st -e cmus
#set $toggle cmus-remote -u
#set $next cmus-remote -n
#set $prev cmus-remote -r
#set $lilfor cmus-remote -k +10
#set $bigfor cmus-remote -k +120
#set $lilbak cmus-remote -k -10
#set $bigbak cmus-remote -k -120
#set $beg cmus-remote -k 00:00:00

# moc
#set $music st -e mocp
#set $toggle mocp -G
#set $truepause mocp -P
#set $next mocp -f
#set $prev mocp -r
#set $lilfor mocp -k 10
#set $bigfor mocp -k 120
#set $lilbak mocp -k -10
#set $bigbak mocp -k -120
#set $beg mocp -j 0%

# >> Basic configs

set $hyper Mod3
set $super Mod4
set $alt Mod1
set $default_gap 10
set $rofi rofi -show
set $term urxvt
set $browser firefox
set $reload ~/.config/i3/scripts/reload
set $lock ~/.config/i3/scripts/lock
set $xf86_key_default i3-nagbar -t warning -m 'Please bind this XF86 key.'
set $mpsyt urxvt -name mps-youtube -e mpsyt

# For i3-gaps
# for_window [class="^.*"] border pixel 3
gaps inner $default_gap

for_window [class="^.*"] floating enable

# font
font pango:UbuntuMono Nerd Font 10

# thin borders
hide_edge_borders both

# drag floating windows
floating_modifier $super

for_window [instance="dropdown"] floating enable
for_window [instance="dropdown"] resize set 900 600
for_window [instance="dropdown"] move scratchpad
for_window [instance="dropdown"] border pixel 5

# >> start external scripts

# Increase key rate
$exe xset r rate 300 30
# Automatic display management
$exe mons -a
# Music player daemon
$exe mpd
# Downloader
$exe cd ~; aria2c
# Torrent daemon
$exe transmission-daemon
# Composite manager
$exe compton --fading
# Set wallpaper and lockscreen image
$exe wallpaper
# Unclutter makes the mouse invisible after a brief period
$exe unclutter
# IME support
$exe fcitx
# Launch dropbox
$exe "sh -c 'sleep 3; exec dropbox'"
# dropdown terminal
$exe $term -name dropdown
# Termite for tmux
$exe termite
# mps-youtube music client
$exe $mpsyt
# Volume tray icon
exec_always $reload pa-applet
# Network Manager applet
exec_always $reload nm-applet
# Bluetooth Manager applet
exec_always $reload blueman-applet
# Make display color warmer
exec_always $reload redshift-gtk
# Launch Polybar where appropriate
exec_always --no-startup-id ~/.config/polybar/launch-bars

# >> bar

#bar {}

# >> layout shortcuts

# Adjust gap size
bindsym $super+Control+0 gaps inner current set $default_gap
bindsym $super+Control+minus gaps inner current plus 5
bindsym $super+Control+equal gaps inner current minus 5

# split in horizontal orientation
bindsym $super+b split h

# split in vertical orientation
bindsym $super+v split v

# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right
bindsym $super+Left focus left
bindsym $super+Down focus down
bindsym $super+Up focus up
bindsym $super+Right focus right

# move focused window
bindsym $super+Shift+h move left
bindsym $super+Shift+j move down
bindsym $super+Shift+k move up
bindsym $super+Shift+l move right
bindsym $super+Shift+Left move left
bindsym $super+Shift+Down move down
bindsym $super+Shift+Up move up
bindsym $super+Shift+Right move right

# >> Workspaces

bindsym $super+Tab workspace back_and_forth

# switch to workspace
bindsym $super+1 workspace $ws1
bindsym $super+2 workspace $ws2
bindsym $super+3 workspace $ws3
bindsym $super+4 workspace $ws4
bindsym $super+5 workspace $ws5
bindsym $super+6 workspace $ws6
bindsym $super+7 workspace $ws7
bindsym $super+8 workspace $ws8
bindsym $super+9 workspace $ws9
bindsym $super+0 workspace $ws10

# move focused container to workspace
bindsym $super+Shift+1 move container to workspace $ws1
bindsym $super+Shift+2 move container to workspace $ws2
bindsym $super+Shift+3 move container to workspace $ws3
bindsym $super+Shift+4 move container to workspace $ws4
bindsym $super+Shift+5 move container to workspace $ws5
bindsym $super+Shift+6 move container to workspace $ws6
bindsym $super+Shift+7 move container to workspace $ws7
bindsym $super+Shift+8 move container to workspace $ws8
bindsym $super+Shift+9 move container to workspace $ws9
bindsym $super+Shift+0 move container to workspace $ws10

# >> App specific workspaces
# Use with Caslock (hyper) key

# Sublime - s
bindsym $hyper+s [class="Sublime_text"] move to workspace $ws-sublime_text; workspace $ws-sublime_text
assign [class="Sublime_text"] $ws-sublime_text

# Chromium - c
bindsym $hyper+c [class="Chromium"] move to workspace $ws-chromium; workspace $ws-chromium
assign [class="Chromium"] $ws-chromium

# Firefox - f
bindsym $hyper+f [class="Firefox"] move to workspace $ws-firefox; workspace $ws-firefox
assign [class="Firefox"] $ws-firefox
for_window [class="Firefox" title="Library"] floating enable

# Android Studio - i
bindsym $hyper+i [class="jetbrains-studio"] move to workspace $ws-androidstudio; workspace $ws-androidstudio
assign [class="jetbrains-studio"] $ws-androidstudio

# mps-youtube - M
for_window [instance="mps-youtube"] floating enable
for_window [instance="mps-youtube"] resize set 1280 720
for_window [instance="mps-youtube"] move scratchpad
for_window [instance="mps-youtube"] border pixel 5
bindsym $hyper+Shift+m [instance="mps-youtube"] scratchpad show; [instance="mps-youtube"] move position center

# Feedreader - r
bindsym $hyper+r [class="Feedreader"] move to workspace $ws-feedreader; workspace $ws-feedreader
assign [class="Feedreader"] $ws-feedreader

# Spotify - s
bindsym $hyper+Shift+s workspace $ws-spotify
assign [class="Musixmatch"] $ws-spotify
for_window [class="Spotify"] move to workspace $ws-spotify

# Telegram - t
for_window [class="Telegram"] floating enable
for_window [class="Telegram"] resize set 1024 960
for_window [class="Telegram"] move scratchpad
for_window [class="Telegram"] border pixel 5
bindsym $hyper+t [class="Telegram"] scratchpad show; [class="Telegram"] move position center

# VSCode - v
bindsym $hyper+v [class="Code"] move to workspace $ws-vscode; workspace $ws-vscode
assign [class="Code"] $ws-vscode

# Mailspring - x
bindsym $hyper+x [class="Mailspring"] move to workspace $ws-mailspring; workspace $ws-mailspring
assign [class="Mailspring"] $ws-mailspring

# Skype - y
bindsym $hyper+y [class="Skype"] move to workspace $ws-skype; workspace $ws-skype
assign [class="Skype"] $ws-skype

# Slack - u
bindsym $hyper+u [class="Slack"] move to workspace $ws-slack; workspace $ws-slack
assign [class="Slack"] $ws-slack

# wewechat - w
for_window [class="wewechat"] floating enable
for_window [class="wewechat"] resize set 960 640
for_window [class="wewechat"] move scratchpad
for_window [class="wewechat"] border pixel 5
bindsym $hyper+w [class="wewechat"] scratchpad show; [class="wewechat"] move position center

# Termite - ;
bindsym $hyper+semicolon [class="Termite"] move to workspace $ws-termite; workspace $ws-termite
assign [class="Termite"] $ws-termite

# Keepass - \
for_window [class="keepassxc"] floating enable
for_window [class="keepassxc"] resize set 1360 720
for_window [class="keepassxc"] move scratchpad
for_window [class="keepassxc"] border pixel 5
bindsym $hyper+backslash [class="keepassxc"] scratchpad show; [class="keepassxc"] move position center

# >> app configs

for_window [class="Galculator"] floating enable

# >> shortcuts

# move workspace between screens
bindsym $super+Control+$alt+Left move workspace to output left
bindsym $super+Control+$alt+Right move workspace to output right

# enter fullscreen mode for the focused container
bindsym $super+f fullscreen

# change container layout
bindsym $super+s layout stacking
bindsym $super+w layout tabbed
bindsym $super+e layout toggle split

# toggle tiling / floating
bindsym $super+Shift+space $exe i3fyra -a

# change focus between tiling / floating windows
bindsym $super+space focus mode_toggle

# focus the parent container
bindsym $super+a focus parent

# kill focused window
bindsym $super+Shift+q kill

# lock
bindsym $super+Control+l $exe $lock

# sleep
bindsym $super+Control+s $exe $lock suspend

# power management menu
bindsym $super+Control+$alt+p $exe dmenu-power

# reload the configuration file
bindsym $super+Control+r reload

# restart i3 inplace
bindsym $super+Control+$alt+r restart

# exit i3 (logs you out of your X session)
bindsym $super+Control+$alt+e exit

# dropdown terminal
bindsym $super+grave [instance="dropdown"] scratchpad show; [instance="dropdown"] move position center

bindsym $super+Shift+c $exe chromium
bindsym $super+Shift+f $exe firefox
bindsym $super+Return $exe $term
bindsym $super+d $exe dmenu_run
bindsym $alt+space $exe $rofi run
bindsym $alt+Tab $exe $rofi window
bindsym $super+c $exe gsimplecal

# toggle between internal monitor and external ones
bindsym $super+Control+F1 $exe dmenu-display primary
bindsym $super+Control+F2 $exe dmenu-display secondary
bindsym $super+Control+F3 $exe dmenu-display extend-right
bindsym $super+Control+F4 $exe dmenu-display

# Media controls
bindsym $super+bracketleft $exe $lilbak
bindsym $super+bracketright $exe $lilfor
bindsym $super+Shift+bracketleft $exe $bigbak
bindsym $super+Shift+bracketright $exe $bigfor
bindsym $super+F5 $exe $prev
bindsym $super+F6 $exe $next
bindsym $super+F7 $exe $toggle
bindsym $super+F9 $exe $mute
bindsym $super+F10 $exe $dec
bindsym $super+F11 $exe $inc

# >> For screenshots and recording

bindsym Print              $exe scrot
bindsym Shift+Print        $exe scrot -u
bindsym $super+Print       $exe dmenu-record
bindsym $super+Scroll_Lock $exe "killall screenkey || screenkey"
bindsym $super+Pause       $exe killall ffmpeg

# >> extra XF86 keys
# these are the extra media keys that some keyboards have

bindsym XF86AudioForward      $exe $lilfor
bindsym XF86AudioLowerVolume  $exe $dec
bindsym XF86AudioMedia        $exe $music
bindsym XF86AudioMicMute      $exe $micmute
bindsym XF86AudioMute         $exe $mute
bindsym XF86AudioNext         $exe $next
bindsym XF86AudioPlay         $exe $toggle
bindsym XF86AudioPause        $exe $toggle
bindsym XF86AudioPrev         $exe $prev
bindsym XF86AudioRaiseVolume  $exe $inc
bindsym XF86AudioRecord       $exe $audio
bindsym XF86AudioRewind       $exe $lilbak
bindsym XF86AudioStop         $exe $toggle
bindsym XF86Back              $exe $xf86_key_default
bindsym XF86Battery           $exe $xf86_key_default
bindsym XF86Bluetooth         $exe $xf86_key_default
bindsym XF86Calculator        $exe galculator
bindsym XF86Close             kill
bindsym XF86Copy              $exe $xf86_key_default
bindsym XF86Cut               $exe $xf86_key_default
bindsym XF86Display           $exe arandr
bindsym XF86Documents         $exe $term -e ranger ~/Documents
bindsym XF86DOS               $exe $xf86_key_default
bindsym XF86Eject             $exe $xf86_key_default
bindsym XF86Explorer          $exe $term -e ranger
bindsym XF86Favorites         $exe $xf86_key_default
bindsym XF86Finance           $exe $xf86_key_default
bindsym XF86Forward           $exe $xf86_key_default
bindsym XF86Game              $exe $xf86_key_default
bindsym XF86Go                $exe $xf86_key_default
bindsym XF86HomePage          $exe $browser; workspace $ws-firefox
bindsym XF86KbdBrightnessDown $exe $xf86_key_default
bindsym XF86KbdBrightnessUp   $exe $xf86_key_default
bindsym XF86KbdLightOnOff     $exe $xf86_key_default
bindsym XF86Launch1           $exe $xf86_key_default
bindsym XF86Launch2           $exe $xf86_key_default
bindsym XF86Launch3           $exe $xf86_key_default
bindsym XF86Launch4           $exe $xf86_key_default
bindsym XF86Launch5           $exe $xf86_key_default
bindsym XF86Launch6           $exe $xf86_key_default
bindsym XF86Launch7           $exe $xf86_key_default
bindsym XF86Launch8           $exe $xf86_key_default
bindsym XF86Launch9           $exe $xf86_key_default
bindsym XF86LaunchA           $exe $xf86_key_default
bindsym XF86LaunchB           $exe $xf86_key_default
bindsym XF86Mail              $exe $xf86_key_default
bindsym XF86MailForward       $exe $xf86_key_default
bindsym XF86MenuKB            $exe $xf86_key_default
bindsym XF86Messenger         $exe $xf86_key_default
bindsym XF86MonBrightnessDown $exe xbacklight -dec 10
bindsym XF86MonBrightnessUp   $exe xbacklight -inc 10
bindsym XF86MyComputer        $exe $xf86_key_default
bindsym XF86New               $exe $xf86_key_default
bindsym XF86Open              $exe $xf86_key_default
bindsym XF86Paste             $exe $xf86_key_default
bindsym XF86Phone             $exe $xf86_key_default
bindsym XF86PowerOff          $exe $xf86_key_default
bindsym XF86Reload            restart
bindsym XF86Reply             $exe $xf86_key_default
bindsym XF86RotateWindows     $exe $xf86_key_default
bindsym XF86Save              $exe $xf86_key_default
bindsym XF86ScreenSaver       $exe $xf86_key_default
bindsym XF86ScrollDown        $exe $xf86_key_default
bindsym XF86ScrollUp          $exe $xf86_key_default
bindsym XF86Search            $exe $xf86_key_default
bindsym XF86Send              $exe $xf86_key_default
bindsym XF86Shop              $exe $xf86_key_default
bindsym XF86Sleep             $exe $xf86_key_default
bindsym XF86Suspend           $exe $xf86_key_default
bindsym XF86TaskPane          $exe $xf86_key_default
bindsym XF86Tools             $exe $mpsyt
bindsym XF86TouchpadOff       $exe $xf86_key_default
bindsym XF86TouchpadOn        $exe $xf86_key_default
bindsym XF86TouchpadToggle    $exe $xf86_key_default
bindsym XF86WakeUp            $exe $xf86_key_default
bindsym XF86WebCam            $exe $xf86_key_default
bindsym XF86WLAN              $exe $xf86_key_default
bindsym XF86WWW               $exe $xf86_key_default
bindsym XF86Xfer              $exe $xf86_key_default
